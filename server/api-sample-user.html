<!DOCTYPE HTML>
<html>
<head>
	<meta charset="UTF-8">

	<script type="text/javascript" src="jquery.js"></script>
	<script src="http://localhost:3000/socket.io/socket.io.js"></script>
	<script src="lib-api.js"></script>


	<script type="text/javascript">
	var s = io.connect('http://localhost:3000');
	InitSocket(s, function(){}, function(){});


	$(document).ready(function() {
		$("#add-user").click(function() {
			UserAdd($("#input-user-add-pass").val(), $("#input-user-add-name").val(), function(err) {
				if (err) {
					// err
					$("#user-add-logs").text("ERROR:Can't add user.[" + err + "]");
					return;
				}

				$("#user-add-logs").text("success.");
				$("#input-user-add-pass").val("");
				$("#input-user-add-name").val("");
			});
		});

		$("#verify-user").click(function() {
			login($("#input-user-verify-name").val(), $("#input-user-verify-pass").val(), function(data) {
				$("#verify-ret-logs").text("");
				$("#verify-ret-logs").append((data.status ? "TRUE" : "FALSE") + ":" + data.userinfo.name + "@" + data.userinfo.id);

				$("#input-user-verify-name").val("");
				$("#input-user-verify-pass").val("");
			});
		});

		$("#delete-user").click(function() {
			UserDelete($("#input-user-delete-pass").val(), $("#input-user-delete-name").val(), function(err) {
				if (err) {
					// err
					$("#user-delete-logs").text("ERROR:Can't delete user.[" + err + "]");
					return;
				}

				$("#user-delete-logs").text("success.");
				$("#input-user-delete-pass").val("");
				$("#input-user-delete-name").val("");
			});
		});

		$("#user-change-name").click(function() {
			__UserChangeName($("#input-user-change-name-old-name").val(), $("#input-user-change-name-new-name").val(), $("#input-user-change-name-pass").val(), function(err){
				$("#user-change-name-logs").text("");
				if (err) {
					$("#user-change-name-logs").text("err:"+err);
					return;
				}

				$("#user-change-name-logs").text("success");
				$("#input-user-change-name-old-name").val("");
				$("#input-user-change-name-new-name").val("");
				$("#input-user-change-name-pass").val("");
			});
		});
	});
	</script>


	<title>Server Client Sample</title>
</head>

<body>
	<h1>Client</h1>
	<h2>Add User</h2>
	NAME:<input type="text" id="input-user-add-name"><br>
	PASS:<input type="text" id="input-user-add-pass"><br>
	<button id="add-user">UserAdd</button>
	<div id="user-add-logs"></div>
	<hr>
	<h2>verify</h2>
	NAME:<input type="text" id="input-user-verify-name"><br>
	PASS:<input type="text" id="input-user-verify-pass"><br>
	<button id="verify-user">verify</button>
	<div id="verify-ret-logs"></div>
	<hr>
	<h2>Delete User</h2>
	NAME:<input type="text" id="input-user-delete-name"><br>
	PASS:<input type="text" id="input-user-delete-pass"><br>
	<button id="delete-user">Delete</button>
	<div id="user-delete-logs"></div>
	<hr>
	<h2>Change User Name</h2>
	OLD-NAME:<input type="text" id="input-user-change-name-old-name"><br>
	NEW-NAME:<input type="text" id="input-user-change-name-new-name"><br>
	PASS:<input type="text" id="input-user-change-name-pass"><br>
	<button id="user-change-name">ChangeName</button>
	<div id="user-change-name-logs"></div>
</body>
</html>
